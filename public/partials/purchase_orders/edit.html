<div class="container-fluid">
	<h3 class="cls-title">{{title}} <span ng-show="data.id">{{ data.id }}</span></h3>

	<form class="row">
		<div class="col-sm-6">
			<div class="form-group" style="margin-bottom: 5px;">
				<label>Proveedor:</label>
				
				<ui-select ng-model="data.vendor">
				    <ui-select-match placeholder="Seleccione un Proveedor">
				        <span ng-bind="$select.selected.name"></span>
				    </ui-select-match>
				    <ui-select-choices repeat="item in (vendorsList | filter: $select.search) track by item.id">
				        <span ng-bind="item.name"></span>
				        <div class="cls-small"><i>{{ item.rfc }}</i></div>
				    </ui-select-choices>
				</ui-select>
			</div>

			<div class="hidden-xs" style="margin-left: 10px;">
				<div class="row">
					<div class="col-sm-2">RFC:</div>
					<div class="col-sm-8 text-info"><i>{{ data.vendor.rfc }}</i></div>
				</div>
				<div class="row">
					<div class="col-sm-2">Email:</div>
					<div class="col-sm-8 text-info"><i>{{ data.vendor.email }}</i></div>
				</div>
				<div class="row">
					<div class="col-sm-2">Contacto:</div>
					<div class="col-sm-8 text-info"><i>{{ data.vendor.contact }}</i></div>
				</div>
			</div>
		</div>

		<div class="col-sm-6">
			<div class="row" style="margin-bottom: 5px;">
				<div class="col-sm-2"><b>Fecha:</b></div>
				<div class="col-sm-8 text-info"><b>{{ data.order_date.substr(0, 10) }}</b></div>
			</div>
			<div class="form-group">
				<label>Comentarios:</label>
				<textarea class="form-control" rows="3" ng-model="data.comments"></textarea>
			</div>
		</div>
	</form>

	<h5 class="cls-title">Productos</h5>

	<form class="form-inline cls-form-detail">
		<div class="form-group">
			<input type="text" class="form-control" ng-model="product.code" ng-keypress="searchCode($event);" placeholder="Código" maxlength="20" style="width:100px">
		</div>
		<div class="form-group">
			<input type="text" class="form-control" ng-model="product.description" placeholder="Descripción" style="width:250px">
		</div>
		<div class="form-group">
			<input type="number" class="form-control" placeholder="Cantidad" title="Cantidad" style="width:85px" 
				ng-model="product.quantity" 
				ng-change="getTotalProduct()" 
				ng-keypress="setFocus($event, 'price')">
		</div>
		<div class="form-group">
			<input type="number" class="form-control" placeholder="Precio" title="Precio" style="width:85px" 
				ng-model="product.price" 
				ng-change="getTotalProduct()" 
				ng-keypress="setFocus($event, 'add')">
		</div>
		<button class="btn btn-success btn-xs" id="btnAddProduct" ng-click="addProduct()">
			<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
		</button>
		<button class="btn btn-info btn-xs" id="btnOpenSearch" ng-click="openSearch()">
			<span class="glyphicon glyphicon-search" aria-hidden="true"></span>
		</button>
	</form>

	<table class="table table-condensed table-bordered cls-table">
		<thead>
			<tr>
				<th>Producto</th>
				<th class="text-center">Cantidad</th>
				<th class="text-center">Precio</th>
				<th class="text-center">Total</th>
				<th class="text-center" width="80">Acciones</th>
			</tr>
		</thead>
		<tbody>
			<tr data-ng-repeat="(key, detail) in data.purchase_order_details" ng-hide="detail._deleted">
				<td>
					<div>{{ detail.product.code }}</div>
					<div class="cls-small">{{ detail.product.description }}</div>
				</td>
				<td align="right">{{ detail.quantity | number }}</td>
				<td align="right">{{ detail.price | currency }}</td>
				<td align="right">{{ detail.total | currency }}</td>
				<td align="center">
					<div class="cls-actions">
						<button class="btn btn-danger btn-xs" ng-click="deleteProduct(detail, key)">
							<span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
						</button>
					</div>
				</td>
			</tr>
		</tbody>
	</table>

	<div class="row cls-toolbar-gray">
		<div class="col-sm-10">
			<button class="btn btn-primary" ng-click="save()">Guardar</button>
			<a class="btn btn-warning" href="#/purchase-orders">Cerrar</a>
		</div>
		<div class="col-sm-2">
			<span class="cls-total-amount">{{ data.total | currency }}</span>
		</div>
	</div>

</div>